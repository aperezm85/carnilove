---
import Subtitle from "@/components/shared/Subtitle.astro";

import ButtonRed from "@/components/shared/ButtonRed.astro";
import BentoGridCarousel from "@/components/BentoGridCarousel/BentoGridCarousel.astro";
---

<section
  id="trusted"
  class="pin-section relative flex flex-col items-center h-dvh overflow-hidden w-full pt-[78px] z-8"
>
  <h1
    id="trusted-title"
    class:list={[
      "font-large-heading text-[60px]/[80%] text-center text-text-primary overflow-hidden uppercase",
      "max-w-[640px] mt-6",
    ]}
  >
    Trusted by thousands of wild hearts across Europe
  </h1>

  <Subtitle id="trusted-description" className="max-w-[640px] mt-5">
    Don’t just take our word for it — hear how real owners feed instinctively
    and see the difference.
  </Subtitle>

  <ButtonRed
    id="trusted-button"
    className="mt-[30px] flex flex-row items-center gap-1.5"
  >
    Hear more from the tribe
  </ButtonRed>

  <section id="bento-container" class="w-full h-[530px] mt-16 overflow-hidden">
    <BentoGridCarousel />
  </section>
</section>
<script>
  import { animateTitle } from "@/utils";
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  const trusted = document.getElementById("trusted");

  const trustedTitle = document.getElementById("trusted-title");
  const trustedDescription = document.getElementById("trusted-description");

  const trustedButton = document.getElementById("trusted-button");
  const bentoContainer = document.getElementById("bento-container");

  animateTitle({
    title: trustedTitle,
    trigger: trusted,
    end: "bottom 95%",
  });
  animateTitle({
    title: trustedDescription,
    trigger: trusted,
    end: "bottom 95%",
  });

  const tl = gsap.timeline({
    scrollTrigger: {
      trigger: trusted,
      start: "top 80%",
      end: "bottom 95%",
      toggleActions: "play reverse restart reset",
    },
  });

  tl.fromTo(
    trustedButton,
    { opacity: 0, y: -20 },
    {
      opacity: 1,
      y: 0,
      duration: 0.5,
      ease: "power2.out",
    }
  ).fromTo(
    bentoContainer,
    { yPercent: 100, opacity: 0 },
    {
      yPercent: 0,
      opacity: 1,
      duration: 1,
      ease: "power2.out",
    },
    "-=0.3"
  );
</script>
